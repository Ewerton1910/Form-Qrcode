<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin - Controle de Pedidos</title>
    <link rel="stylesheet" href="styles.css" />
    
    <!-- üî• Firebase SDK (remova os espa√ßos extras nas URLs!) -->
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-database-compat.js"></script>
    
    <style>
      .container {
        max-width: 500px;
        margin: 40px auto;
        padding: 24px;
      }
      .btn {
        width: 100%;
        padding: 14px;
        margin: 8px 0;
        border: none;
        border-radius: 8px;
        color: white;
        font-size: 16px;
        cursor: pointer;
      }
      .btn.ativar {
        background: #25d366;
      }
      .btn.desativar {
        background: #e74c3c;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h2>‚öôÔ∏è Painel de Administra√ß√£o</h2>
      <p>
        <strong>Status atual:</strong> <span id="status">Carregando...</span>
      </p>

      <button class="btn ativar" id="btnAtivar">‚úÖ Ativar Pedidos</button>
      <button class="btn desativar" id="btnDesativar">
        ‚ùå Desativar Pedidos
      </button>

      <a
        href="index.html"
        style="
          display: block;
          margin-top: 20px;
          color: #667eea;
          text-decoration: none;
        "
        >‚Üê Voltar ao formul√°rio</a
      >
    </div>

    <!-- ‚úÖ Script corrigido: usa Firebase, n√£o localStorage -->
    <script>
      // üî• Seu firebaseConfig (mesmo do script.js)
      const firebaseConfig = {
        apiKey: "AIzaSyAE4cDYIovbsK61qug_wgDUdlbrR5lpvGM",
        authDomain: "lanchonete-pedidos.firebaseapp.com",
        databaseURL: "https://lanchonete-pedidos-default-rtdb.firebaseio.com",
        projectId: "lanchonete-pedidos",
        storageBucket: "lanchonete-pedidos.firebasestorage.app",
        messagingSenderId: "558143780233",
        appId: "1:558143780233:web:2ddbbd6b5ef2dad6435d58"
      };

      // Inicializa Firebase
      firebase.initializeApp(firebaseConfig);
      const db = firebase.database();

      // Atualiza status em tempo real
      db.ref('servico/ativo').on('value', (snapshot) => {
        const ativo = snapshot.val() !== false;
        document.getElementById('status').textContent = ativo ? 'üü¢ Ativo' : 'üî¥ Desativado';
      });

      // Ativar
      document.getElementById('btnAtivar').addEventListener('click', () => {
        db.ref('servico/ativo').set(true);
        alert('‚úÖ Pedidos ativados com sucesso!');
      });

      // Desativar
      document.getElementById('btnDesativar').addEventListener('click', () => {
        db.ref('servico/ativo').set(false);
        alert('‚ùå Pedidos desativados com sucesso!');
      });
    </script>
  </body>
</html>
